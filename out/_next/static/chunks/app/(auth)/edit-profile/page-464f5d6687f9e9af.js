(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1744],{6205:function(e,t,a){Promise.resolve().then(a.bind(a,33118))},33118:function(e,t,a){"use strict";a.r(t);var l=a(3827),s=a(1017),i=a(4205),n=a(7908),r=a(47907),c=a(64090),o=a(83441),d=a.n(o);a(42413);var h=a(18009),u=a(71399),m=a(70784);t.default=function(){let e=(0,r.useRouter)(),[t,a]=(0,c.useState)(null),[o,p]=(0,c.useState)(null),[x,y]=(0,c.useState)({name:"",phone:""}),[g,f]=(0,c.useState)(""),[b,j]=(0,c.useState)(""),[v,w]=(0,c.useState)(""),[N,k]=(0,c.useState)([]),[Z,S]=(0,c.useState)([]),[C,P]=(0,c.useState)([]),[_,F]=(0,c.useState)(""),[E,I]=(0,c.useState)(""),[V,z]=(0,c.useState)([]);(0,c.useEffect)(()=>{localStorage.getItem("token")||e.push("/login"),n.Z.get(i.Z+"/user/details",{headers:{"x-access-token":localStorage.getItem("token")}}).then(e=>{y(t=>({...t,name:e.data.name,phone:e.data.phoneNumber})),f(e.data.assembly),F(e.data.constituency),I(e.data.union),w(e.data.district),a(new Date(e.data.date_of_birth));let t="";""!==e.data.panchayath?(j(e.data.panchayath),p("panchayath"),t="panchayath"):""!==e.data.municipality?(j(e.data.municipality),p("municipality"),t="municipality"):""!==e.data.corporation&&(j(e.data.corporation),p("corporation"),t="corporation"),n.Z.get(i.Z+"/admin/districtV4?district="+e.data.district+"&constituency="+e.data.district).then(e=>{console.log(e.data),z(e.data)}),n.Z.get(i.Z+"/admin/districtV4?district="+e.data.district+"&constituency="+e.data.district+"&assembly="+e.data.assembly+"&local="+t).then(e=>{console.log(e.data),P(e.data)})}).catch(e=>{console.log(e)})},[]);let D=e=>{p(e.target.value),n.Z.get(i.Z+"/admin/districtV4?district="+v+"&constituency="+v+"&assembly="+g+"&local="+e.target.value).then(e=>{P(e.data)})};return(0,c.useEffect)(()=>{n.Z.get(i.Z+"/admin/districtV4").then(e=>{k(e.data)}),n.Z.get(i.Z+"/admin/mandalam").then(e=>{S(e.data)})},[]),(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(s.Z,{children:(0,l.jsxs)("div",{className:"edit-profile w-full min-h-screen flex flex-col justify-start items-center relative",style:{backgroundImage:"url('images/backimg.jpeg')",backgroundSize:"cover"},children:[(0,l.jsx)("h1",{className:"text-black text-2xl text-center font-bold my-7 mt-14 mb-4 top-text",children:"Edit Profile"}),(0,l.jsx)(m.lrP,{className:"text-xl cursor-pointer absolute top-5 left-5 top-text",onClick:()=>e.back()}),(0,l.jsxs)("div",{className:"flex-1 w-full justify-center items-center bg-slate-900 rounded-t-3xl mt-5",children:[(0,l.jsxs)("div",{className:"input-container pt-10 pb-5 flex flex-col w-full justify-center items-center",children:[(0,l.jsxs)("div",{style:{width:"80%",height:"50px"},className:"my-3 rounded-lg flex justify-start items-center border-2 border-white pl-5",children:[(0,l.jsx)(u.Xws,{size:24,color:"white"}),(0,l.jsx)("input",{type:"text",placeholder:"Name",onChange:e=>y({...x,name:e.target.value}),value:x.name,className:"bg-transparent border-none outline-none text-white pl-2 w-full"})]}),(0,l.jsxs)("div",{style:{width:"80%",height:"50px"},className:"my-3 rounded-lg flex justify-start items-center border-2 border-white pl-5",children:[(0,l.jsx)(u.I7T,{size:24,color:"white"}),(0,l.jsx)("input",{type:"number",placeholder:"Phone Number",onChange:e=>y({...x,phone:e.target.value}),value:x.phone,className:"bg-transparent border-none outline-none text-white pl-2 w-full"})]}),(0,l.jsxs)("div",{style:{width:"80%",height:"50px"},className:"my-3 rounded-lg flex justify-start items-center border-2 border-white pl-5",children:[(0,l.jsx)(u.RPl,{size:24,color:"white",className:"mr-2"}),(0,l.jsx)(d(),{selected:t,onChange:e=>{a(e)},placeholderText:"Birthday",dateFormat:"MM/dd/yyyy",className:"text-white bg-transparent border-none outline-none w-full"})]}),(0,l.jsxs)("select",{id:"constituency",onChange:e=>F(e.target.value),style:{width:"80%",height:"50px"},value:_,className:"my-3 rounded-lg flex justify-start items-center border-2 border-white pl-5 bg-slate-900 text-white",children:[(0,l.jsx)("option",{selected:!0,value:"",children:"Loka Sabha"}),null==Z?void 0:Z.map(e=>(0,l.jsx)("option",{value:e.mandalam,children:e.mandalam},e._id))]}),(0,l.jsxs)("select",{id:"district",onChange:e=>{w(e.target.value),n.Z.get(i.Z+"/admin/districtV4?district="+e.target.value+"&constituency="+e.target.value).then(e=>{z(e.data),P([]),j(""),p(null)})},style:{width:"80%",height:"50px"},value:v,className:"my-3 rounded-lg flex justify-start items-center border-2 border-white pl-5 bg-slate-900 text-white",children:[(0,l.jsx)("option",{selected:!0,value:"",children:"District"}),null==N?void 0:N.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]}),V.length>0&&(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("select",{id:"assembly",onChange:e=>f(e.target.value),value:g,style:{width:"80%",height:"50px"},className:"my-3 rounded-lg flex justify-start items-center border-2 border-white pl-5 bg-slate-900 text-white",children:[(0,l.jsx)("option",{selected:!0,value:"",children:"Legislative Assembly"}),null==V?void 0:V.map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsxs)("label",{htmlFor:"panchayath",className:"flex pl-10 text-white",children:[(0,l.jsx)("input",{type:"radio",id:"panchayath",value:"panchayath",checked:"panchayath"===o,onChange:D,className:"mr-2"}),(0,l.jsx)("p",{className:"text-white",children:"Panchayath"})]}),(0,l.jsxs)("label",{htmlFor:"municipality",className:"flex pl-10 text-white",children:[(0,l.jsx)("input",{type:"radio",id:"municipality",value:"municipality",checked:"municipality"===o,onChange:D,className:"mr-2"}),(0,l.jsx)("p",{className:"text-white",children:"Municipality"})]}),(0,l.jsxs)("label",{htmlFor:"corporation",className:"flex pl-10 text-white",children:[(0,l.jsx)("input",{type:"radio",id:"corporation",value:"corporation",checked:"corporation"===o,onChange:D,className:"mr-2"}),(0,l.jsx)("p",{className:"text-white",children:"Corporation"})]})]}),C.length>0&&(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("select",{id:"local",onChange:e=>j(e.target.value),value:b,style:{width:"80%",height:"50px"},className:"my-3 rounded-lg flex justify-start items-center border-2 border-white pl-5 bg-slate-900 text-white",children:[(0,l.jsx)("option",{selected:!0,children:o}),null==C?void 0:C.map((e,t)=>(0,l.jsx)("option",{value:e,children:e},t))]})})]}),(0,l.jsx)("div",{className:"w-full flex justify-center items-center my-5",children:(0,l.jsx)("button",{onClick:a=>{if(a.preventDefault(),!x.name||!x.phone||""===g||""===v||""===_||""===b)return h.ZP.error("Please fill all the fields");let l="panchayath"===o?b:"",s="municipality"===o?b:"",r="corporation"===o?b:"";n.Z.put(i.Z+"/user/update",{name:x.name,phoneNumber:x.phone,date_of_birth:t,assembly:g,district:v,constituency:_,panchayath:l,municipality:s,corporation:r,union:E},{headers:{"x-access-token":localStorage.getItem("token")}}).then(t=>{200===t.status&&(h.ZP.success("Profile updated successfully"),e.push("/profile"))}).catch(e=>{h.ZP.error(e.response.data.message)})},className:"bg-amber-500 text-white w-80 text-xl py-2 rounded-xl font-semibold ",children:"Update"})})]})]})})})}},1017:function(e,t,a){"use strict";var l=a(3827);a(64090);var s=a(18009);t.Z=function(e){let{children:t}=e;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"w-screen h-screen flex justify-center items-center overflow-x-hidden",children:(0,l.jsx)("div",{className:"md:w-[45%] w-full h-screen ",children:t})}),(0,l.jsx)(s.x7,{})]})}},4205:function(e,t){"use strict";t.Z="https://dccbackend.plusitpark.com/api"}},function(e){e.O(0,[6051,7699,1544,1778,1296,7908,6546,2971,9362,560],function(){return e(e.s=6205)}),_N_E=e.O()}]);